<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [第5章 重复匹配](#%E7%AC%AC5%E7%AB%A0-%E9%87%8D%E5%A4%8D%E5%8C%B9%E9%85%8D)
  - [5.1 有多少个匹配](#51-%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AA%E5%8C%B9%E9%85%8D)
    - [5.1.1 匹配一个或多个字符](#511-%E5%8C%B9%E9%85%8D%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%AD%97%E7%AC%A6)
    - [5.1.2 匹配零个或多个字符](#512-%E5%8C%B9%E9%85%8D%E9%9B%B6%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%AD%97%E7%AC%A6)
    - [5.1.3 匹配零个或一个字符](#513-%E5%8C%B9%E9%85%8D%E9%9B%B6%E4%B8%AA%E6%88%96%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6)
    - [5.2.1 为重复匹配次数设定一个精确的值](#521-%E4%B8%BA%E9%87%8D%E5%A4%8D%E5%8C%B9%E9%85%8D%E6%AC%A1%E6%95%B0%E8%AE%BE%E5%AE%9A%E4%B8%80%E4%B8%AA%E7%B2%BE%E7%A1%AE%E7%9A%84%E5%80%BC)
    - [5.2.2 为重复匹配次数设定一个区间](#522-%E4%B8%BA%E9%87%8D%E5%A4%8D%E5%8C%B9%E9%85%8D%E6%AC%A1%E6%95%B0%E8%AE%BE%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%8C%BA%E9%97%B4)
    - [5.2.3 匹配“至少重复多少次”](#523-%E5%8C%B9%E9%85%8D%E8%87%B3%E5%B0%91%E9%87%8D%E5%A4%8D%E5%A4%9A%E5%B0%91%E6%AC%A1)
  - [5.3 防止过度匹配](#53-%E9%98%B2%E6%AD%A2%E8%BF%87%E5%BA%A6%E5%8C%B9%E9%85%8D)
- [第6章 位置匹配](#%E7%AC%AC6%E7%AB%A0-%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->


## 第5章 重复匹配

### 5.1 有多少个匹配

#### 5.1.1 匹配一个或多个字符
* 多次重复，需要给字符（或字符集合）加上`+`字符作为后缀
* `+`匹配一个或多个字符，例如，`[0-9]+`，匹配一个或多个连续的数字
* 必须把`+`放在字符集合的外面

1. 举例，如何匹配电子邮件
   `\w+@\w\+\.\w+`
2. ben.forta@forta.com无法匹配
`[\w.]+@[\w\.]+\.\w+`

>`+`是一个元字符，如果需要匹配`+`本身，需要使用它的转义序列`\+`
>在字符集合中使用 `.和+`元字符，不需要转义

#### 5.1.2 匹配零个或多个字符

* 匹配零个或多个字符，后缀加上`*`

1. 匹配电子邮件
   `\w+[w\.]*@[\w.]+\.\w+`

>`*`是一个元字符，如果需要匹配`*`本身，需要使用它的转义序列`\*`

#### 5.1.3 匹配零个或一个字符

* `?` 只能匹配一个字符（或字符集合），零次或一次出现

1. 匹配网址
   `https?://[\w./]+`

2. 同时匹配Unix/Linux和Windows空白行
   `[\r]?\n[\r]?\n`

>把一个字符定义为一个集合，可以增加可读性和避免产生误解
>`?`是一个元字符，如果需要匹配`?`本身，需要使用它的转义序列`\?`
### 5.2 重复匹配的次数

* `+、*和？`解决了许多问题，但是无法设置匹配的重复次数
* **重复次数**：interval，正则表达式，使用`{和}`设定重复次数，数组写在它们中间

>`{和}`是元字符，如果需要匹配字符本身，需要使用转义序列

#### 5.2.1 为重复匹配次数设定一个精确的值

* 匹配RGB值的原有正则表达式
    `#[[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]]`
* 优化后的表达式
    `#[[:xdigit:]]{6}`

#### 5.2.2 为重复匹配次数设定一个区间
* `{}`可以为重复匹配次数设定一个区间，**重复次数可以是0**
* `{2,4}`，表示最少重复2次，最多重复4次

1. 匹配日期格式
   `\d{1,2}[-\/]\d{1,2}[-\/]\d{2,4}`

>`/`字符，匹配它自身的时候，在大多数正则表达式分析器中，不需要转义（最好转义）

#### 5.2.3 匹配“至少重复多少次”
* `{3，}` 表示最少匹配3次

### 5.3 防止过度匹配

* 元字符的懒惰型版本（匹配尽可能少的字符）
* 在贪婪型元字符后加`?`

**表5-1 常用的贪婪型元字符和它们的懒惰型版本**

贪婪型元字符|懒惰型元字符
-|-|
* |*？
+|+?
{n,}|{n,}?


## 第6章 位置匹配